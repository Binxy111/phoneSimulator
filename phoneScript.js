var simulatorArrayLists = [
							["1.Account Information\n2.Tarriff Plan Migration\n3.Data Services\n4.Roaming & Int'l Offers\n5.My Services\n6.Extra Time\n7.More\n"],
							["My Tools\n1.My Number\n2.My tarriff plan\n3.My Account balance\n4.My Data Balance\n5.End of Call Message\n",["Yello! Your mobile number is +234 812 38 70 941"],["1.BetaTalk\n2.Pulse\n3.Xtraspecial\n4.XtraValue\n",["Enjoy 150% airtime bonus on every recharge below N100 & 250% airtime bonus on every recharges from above N100 & above on BetaTalk.\n1.Migrate To BetaTalk\n","Welcome you are now on MTN BetaTalk"],["Enjoy youthful life on MTN Pulse\n.1.Migrate to MTN Pulse","Welcome you are now on MTN Pulse"],["Make calls with No Access Fee at a flat rate of 15 kobo/sec to ALL networks in Nigeria 6 18 Int'l/countries.\n1.Migrate to MTN Xtraspecial\n","Welcome you are now on MTN Xtraspecial"],["This plan gives you airtime for Natl & Int'l calls plus data after subscribing to a bundle plan.\n1.Migrate to MTN XtraValue\n","Welcome you are now on MTN XtraValue"]],["Please dial *556# for prepaid balance & *558# for postpaid balance"],["Sorry you currently have no active Data Bundle.Please dial *131*1# to buy a new bundle, *606# to borrow data or *131*200# to browse @N3/MB"],["1.Activate EOCN\n3.Deactivate EOCN\n"]],
							["1.BetaTalk\n2.Pulse\n3.Xtraspecial\n4.XtraValue\n",["Enjoy 150% airtime bonus on every recharge below N100 & 250% airtime bonus on every recharges from above N100 & above on BetaTalk.\n1.Migrate To BetaTalk\n","Welcome you are now on MTN BetaTalk"],["Enjoy youthful life on MTN Pulse\n.1.Migrate to MTN Pulse","Welcome you are now on MTN Pulse"],["Make calls with No Access Fee at a flat rate of 15 kobo/sec to ALL networks in Nigeria 6 18 Int'l/countries.\n1.Migrate to MTN Xtraspecial\n","Welcome you are now on MTN Xtraspecial"],["This plan gives you airtime for Natl & Int'l calls plus data after subscribing to a bundle plan.\n1.Migrate to MTN XtraValue\n","Welcome you are now on MTN XtraValue"]],
							["1.Buy Data Plans\n2.Buy XtraValue Bundles\n3.Buy Goody Bags\n4.Check Balance\n5.Roaming & Int'l Offers\n6.Xtratime/Bytes\n7.Data Gift\n8.YouTube Packs",["Buy Data Plans\n1.Daily Plan\n2.Weekly Plan\n3.Montly Plan\n4.2-Months Plans\n5.3-Months Plans",["1.50MB Daily N100\n2.150MB Daily N200","Activation of Daily Data Plan Has Been Successful"],["1.150MB Weekly Plan; Cost N300\n2.500MB + 250MB bonus (1am-7am) Weekly @ N500","Activation of Weekly Data Plan Has Been Successful"],["1.1GB + 500MB bonus (1am-7am) @ N1000\n2.1.5Gb @ N1200\n3.2.5GB + 1GB (1am-7am) @ N2000\n4.5GB @ N3500\n5.10GB @ N5000\n6.22GB @ N10000","Activation of Montly Data Plan Has Been Successful"],["1.50GB 2-Months Plan @ N20000","Activation of 2 Months Data Plan Has Been Successful"],["1.85GB 3-Months Plan @ N50000","Activation of 3 Months Data Plan Has Been Successful"]],["XtraValue Bundles\n1.XtraTalk\n2.XtraData\n3.Eligible Int'l Destination",["1.XtraTalk300\n2.XtraTalk500\n3.XtraTalk1000\n4.XtraTalk2000\n5.XtraTalk5000\n6.XtraData10000\n6.XtraTalk15000","Activation of XtraTalk Plan Has Been Successful"],["1XtraData300\n2.XtraData500\n3.XtraData1000\n4.XtraData2000\n5.XtraData5000\n6.XtraData10000\n6.XtraData15000","Activation of XtraData Plan Has Been Successful"],["USA, UK Fixed, Italy, France, Hong Kong, Singapore, India, Australia Fixed, Canada, China"]],["1.WhatsApp\n2.Facebook\n3.Twitter\n4.Instagram\n5.2go\n6.Wechat\n7.Eskimi\n8.Nimbbuzz",["1.WhatsApp Daily@N50\n2.WhatsApp Weekly@N100\n3.WhatsApp Montly@N150","WhatsApp Plan Activation Successful"],["1.Facebook Daily@N50\n2.Facebook Weekly@N100\n3.Facebook Montly@N150","Facebook Plan Activation Successful"],["Yello! Twitter Service is no longer available.\nPlease dial *131*3# for other GoodyBag Social bundles.\nThank you!"],["1.Instagram Daily@N50\n2.Instagram Weekly@N100\n3.Instagram Montly@N150","Instagram Plan Activation Successful"],["1.2go Daily@N50\n2.2go Weekly@N100\n3.2go Montly@N150","2go Plan Activation Successful"],["1.Wechat Daily@N50\n2.Wechat Weekly@N100\n3.Wechat Montly@N150","Wechat Plan Activation Successful"],["1.Eskimi Daily@N50\n2.Eskimi Weekly@N100\n3.Eskimi Montly@N150","Eskimi Plan Activation Successful"],["Yello! Nimbbuzz Service is no longer available.\nPlease dial *131*3# for other GoodyBag Social bundles.\nThank you!"]],["Sorry you currently have no active Data Bundle.Please dial *131*1# to buy a new bundle, *606# to borrow data or *131*200# to browse @N3/MB"],["1.HelloWorld Roaming offer\n2.SuperRoamer(Free Incoming roaming)\n3.Int'l Bundle\n",["1.UAE Roaming Bundle\n2.Discounted Global Roaming\n3.Global Roaming Bundle",["Get Free 30 Incoming mins,20 outgoing mins and 10 outgoing SMS for just N6,000. Valid for 14 days.\n1.Proceed","UAE Roaming Bundle Activated. Valid for 14 days only."],["Roam:USA, UK Fixed, Italy, France, Hong Kong, Singapore, India, Australia Fixed, Canada, China at Discounted rates\n1.Proceed","Discounted Global Roaming Activated"],["Subscribe to Daily,Weekly or Montly bundles and enjoy unbeatable roaming rates while roaming in Global Destination\n1.Proceed","Global roaming bundles activated"]],["1.Check Eligibility\n2.Eligibility Destinations\n3.Check Balance",["Yello! Recharge or spend N500 more to receive up to 300 minutes of free incoming calls during your next trip to abroad."],["1.UK\n2.USA\n3.GERMANY\n4.FRANCE\n5.ITALY"],["Yello, Your SuperRoamer has no active DATA."]],["1.View Eligible Destination(Bundle applicable to selected networks in destinations listed)\n2.Subscribe to Int'l Calling Bundle",["1.UK\n2.USA\n3.GERMANY\n4.FRANCE\n5.ITALY"],["Int'l Bundle Activated applicable to destination selected networks only."]]],["Y'ello. You will be able to borrow airtime/data when you recharge at least 100 NGN for 3 months. Thank you."],["Welcome to Data Gift\n1.Daily Plan\n2.Weekly Plan\n3.Montly Plan\n4.2-Months Plans\n5.3-Months Plans",["1.50MB Daily N100\n2.150MB Daily N200","Daily Data Gift Has Been Sent successfully to"],["1.150MB Weekly Plan; Cost N300\n2.500MB + 250MB bonus (1am-7am) Weekly @ N500","Weekly Data Gift Has Been Sent successfully to"],["1.1GB + 500MB bonus (1am-7am) @ N1000\n2.1.5Gb @ N1200\n3.2.5GB + 1GB (1am-7am) @ N2000\n4.5GB @ N3500\n5.10GB @ N5000\n6.22GB @ N10000","Montly Data Gift Has Been Sent successfully to"],["1.50GB 2-Months Plan @ N20000","2 Months Data Gift Has Been Sent successfully to"],["1.85GB 3-Months Plan @ N50000","3 Months Data Gift Has Been Sent successfully to"]],["Subscribe to a videeo pack plan & enjoy videeo streaming or download on YouTube.\n1.1hour @N100\n2.3hour @N400",["Enjoy 1hour YouTube streaming Valid for 24hours"],["Enjoy 3hour YouTube streaming Valid for 24hours"]]],
							["1.HelloWorld Roaming offer\n2.SuperRoamer(Free Incoming roaming)\n3.Int'l Bundle\n",["1.UAE Roaming Bundle\n2.Discounted Global Roaming\n3.Global Roaming Bundle",["Get Free 30 Incoming mins,20 outgoing mins and 10 outgoing SMS for just N6,000. Valid for 14 days.\n1.Proceed","UAE Roaming Bundle Activated. Valid for 14 days only."],["Roam:USA, UK Fixed, Italy, France, Hong Kong, Singapore, India, Australia Fixed, Canada, China at Discounted rates\n1.Proceed","Discounted Global Roaming Activated"],["Subscribe to Daily,Weekly or Montly bundles and enjoy unbeatable roaming rates while roaming in Global Destination\n1.Proceed","Global roaming bundles activated"]],["1.Check Eligibility\n2.Eligibility Destinations\n3.Check Balance",["Yello! Recharge or spend N500 more to receive up to 300 minutes of free incoming calls during your next trip to abroad."],["1.UK\n2.USA\n3.GERMANY\n4.FRANCE\n5.ITALY"],["Yello, Your SuperRoamer has no active DATA."]],["1.View Eligible Destination(Bundle applicable to selected networks in destinations listed)\n2.Subscribe to Int'l Calling Bundle",["1.UK\n2.USA\n3.GERMANY\n4.FRANCE\n5.ITALY"],["Int'l Bundle Activated applicable to destination selected networks only."]]],
							["Welcome to the MTN Content Services Menu Reply with a number to manage your\n1.Active services\n2.New services\n3.Unconfirmed services",["Yellow your active Content Services are not available now."],["Yellow no Content Services are not available now."],["Yellow no Content Services are not available now."]],
							["Y'ello. You will be able to borrow airtime/data when you recharge at least 200 NGN for 3 months. Thank you.\n1.Eligible Status",["Yello. You are not currently eligible for MTN XtraTime Service."]],
							["1.Mobile Newspaper Service\n2.ShareAndSell\n3.Okada Books","Dear customer this service is not available. Thank you"]
						];
seconds = 6;
inputLocker = "";
line = "netZero";
firstList = "";
secondList = "";
thirdList = "";
fourtList = "";
fifthList = "";
input = '';
callInput = '';
callHour = 0;
callMin = 0;
callSec = -1;
amtSec = -1;
amtUsed = '';
a = new Audio("sound/champ.mp3");
b = new Audio("sound/lowcredit.mp3");


function get(u) { 
  if(inputLocker == "off") {
      // document.getElementById('screen').innerHTML = "Input error";
      return;
  } //this lock the input consistently unless a button is pressd to unlock it

	if(document.getElementById('screen').innerHTML == ''){
    inputLocker = "on"; //this unlock the inpput locker whenever a button is pressed
		document.getElementById('screen').innerHTML = u;
	} //if the screen is empty the first inputed character is shown

	else if(document.getElementById('screen').innerHTML != ''){
		document.getElementById('screen').innerHTML += u;
	} //this append the other next of characters pressed to the initial inputed character
}


function cut() {
  a.pause();
  t = callHour+":"+callMin+":"+callSec;
  line = "netZero";
  inputLocker = "on";

  if(document.getElementById('screen').innerHTML == ''){
    document.getElementById('screen').innerHTML = '';
  } //if the screen is empty and the red button is pressed, it stays cool

  if (document.getElementById('screen').innerHTML == t && document.getElementById('iphone').innerHTML == t) {
    clearTimeout(tim);
    callSec = -1;
    document.getElementById('screen').innerHTML = 'The duration of your last call is'+' '+amtSec+' '+'secs. and you have been charged with N'+amtUsed+' '+'for it.';
    document.getElementById('iphone').innerHTML = '';
    document.getElementById('phone').setAttribute('hidden',true)
    return;
  } //if the screen is on call and the button is pressed, this ends the call and display the amount used
  
  else{
    document.getElementById('screen').innerHTML = '';
    b.pause();
  } //else all other stuff on screen is cleared outta
}


function back () {
  if(inputLocker == 'on'){
    var size = document.getElementById('screen').innerHTML.length;
    document.getElementById('screen').innerHTML = document.getElementById('screen').innerHTML.slice(0,size-1);
    } //if the inputlocker is on (when a charcter is display on the screen) this clear em outta one by one 
  
  else{
    document.getElementById('screen').innerHTML = '';
  }
}


function go() {
  acctBal = localStorage.Balance;
  retrievedData = localStorage.getItem('Voucher');
  card = JSON.parse(retrievedData);

  if(document.getElementById('screen').innerHTML == '') {
    document.getElementById('screen').innerHTML = '';
  	return;
  } //if the screen is empty nothing is put at process

  //if the screen isn't empty this blocks start to process acording to it condition
  else{
    //calling code block begin here
      if (document.getElementById('screen').innerHTML.length == 11 && 
          document.getElementById('screen').innerHTML.slice(0,1) == '0') {
      	callInput=document.getElementById('screen').innerHTML;
      	document.getElementById('screen').innerHTML = 'Calling....\n'+callInput;
      	inputLocker = 'off';
      }
      if (document.getElementById('screen').innerHTML == 'Calling....\n'+callInput && 
        localStorage.Balance > 0 && seconds == 0){document.getElementById('phone').removeAttribute('hidden',true);
      	document.getElementById('iphone').innerHTML = 'Incoming call from\nAlcatel Holder';
      	a.play();
      	inputLocker = 'off';
      }
      else if (document.getElementById('screen').innerHTML == 'Calling....\n'+callInput && 
        localStorage.Balance <= 0 || localStorage.Balance == undefined && seconds == 0){
      	b.play();
      	inputLocker = 'off';
      	b.onended = function(){
      		b.pause();
      		cut();
      	}
      }
    //calling code end here

  //code block that help to load voucher begin here...
    if(document.getElementById('screen').innerHTML.length == 22 && 
        document.getElementById('screen').innerHTML.slice(0,5) == '*555*'){
      	input = document.getElementById('screen').innerHTML;
      	document.getElementById('screen').innerHTML = 'Loading...';
      	inputLocker = 'off';
      	inputCard = input.slice(5,21);
      	search=new RegExp(inputCard);
      	for(i = 0; i < card.length; i++) {
      		sea = search.test(card);
      	}
    } //this checks if the character is the required and if the embeded vouvher is amidst the voucher in the localStorage
      if(document.getElementById('screen').innerHTML == 'Loading...' && sea == true && seconds == 0) {
        if (localStorage.Balance == undefined) {
          localStorage.Balance = 0;
        }
       //  if (localStorage.Balance == 'NaN') {
      	// 	localStorage.setItem('Balance',0) 
      	// }
        for(v = 0; v < card.length; v++){
        	if (inputCard == card[v][0] && card[v][1] == 'New') {
        		card[v][1] = 'Used';
        		localStorage.setItem('Voucher',JSON.stringify(card));
            localStorage.Balance = parseInt(localStorage.Balance) + card[v][2];
            document.getElementById('screen').innerHTML = 'You have successfully recharge your account with N'+card[v][2];
        		break;
        	}
        	else {
        		document.getElementById('screen').innerHTML = 'Sorry,but this airtime has already been used by you.';
        	}  
        }
      }
    else if (document.getElementById('screen').innerHTML == 'Loading...' && sea == false && seconds == 0) {
    	document.getElementById('screen').innerHTML = 'Incorrect PIN entered,please check and try again';
    	inputLocker = 'off';
    }
    //...code block that helps to load voucher ends here!

  //code block to check account balance start
    if(document.getElementById('screen').innerHTML == '*556#'){
    	acctBals='';
    	document.getElementById('screen').innerHTML = 'Requesting...';
    	inputLocker = 'off';
    }
    if(document.getElementById('screen').innerHTML == 'Requesting...' && seconds == 0){
      if(localStorage.Balance == undefined) {
        document.getElementById('screen').innerHTML = 'Your main acct balance is : N0.00. Please go to Voucher link and generate then load to recharge your account'
        inputLocker = 'off';
      } 
      else {
        for (i = 0; i < acctBal.length; i++) {
          h = acctBal[i];
          acctBals += h;
          if(i == 4) {
            break;
          }
        }
      	document.getElementById('screen').innerHTML = 'Your main acct balance is : N'+acctBals;
      	inputLocker = 'off';
      }
    }
  //code block to check account balance end

  //code block of *123# begin here
    if(line=="netZero" && document.getElementById('screen').innerHTML=='*123#'){
    	document.getElementById('screen').innerHTML='Please wait...';
    	inputLocker='off';
      line = "net";
    }
    if(document.getElementById('screen').innerHTML=='Please wait...' && seconds==0){
     	document.getElementById('screen').innerHTML=simulatorArrayLists[0][0];
     	inputLocker="off";
    }
    if (line=="net1") {
     	if (seconds==2) {
     		firstList=document.getElementById('screen').innerHTML;
     		document.getElementById('screen').innerHTML='Please wait...';
     		inputLocker='off';
     	}
     	if (seconds==0) {
     		document.getElementById('screen').innerHTML=simulatorArrayLists[firstList][0];
     		line="net2";
     		inputLocker='off';
     	}
     	else if(seconds==0 && firstList==7){
     		document.getElementById('screen').innerHTML=simulatorArrayLists[firstList][1];
     	}
    }
    if(line=="net3"){
     	if (seconds==2) {
     		secondList=document.getElementById('screen').innerHTML;
     		document.getElementById('screen').innerHTML='Please wait...';
     		inputLocker='off';
     	}
     	if (seconds==0 && secondList!=0) {
     		document.getElementById('screen').innerHTML=simulatorArrayLists[firstList][secondList][0];
     		if(firstList==7){
     			document.getElementById('screen').innerHTML=simulatorArrayLists[firstList][1];
     		}
     		line="net4";
     		inputLocker='off';
     	}
     	else if(seconds==0 && secondList==0){
     		document.getElementById('screen').innerHTML=simulatorArrayLists[0][0];
     		line="net2";
     		inputLocker='off';
     	}
    }
    if (line=="net5"){
     	if (seconds==2) {
     		thirdList=document.getElementById('screen').innerHTML;
     		document.getElementById('screen').innerHTML='Please wait...';
     		inputLocker='off';
     	}
     	if (seconds==0) {
     		document.getElementById('screen').innerHTML=simulatorArrayLists[firstList][secondList][thirdList][0];
     		if (firstList==2) {
     			document.getElementById('screen').innerHTML=simulatorArrayLists[firstList][secondList][thirdList];
     		}
     		line="net6";
     		inputLocker='off';
     	}
    }
    if (line=="net7"){
     	if (seconds==2) {
     		fourtList=document.getElementById('screen').innerHTML;
     		document.getElementById('screen').innerHTML='Please wait...';
     		inputLocker='off';
     	}
     	if (seconds==0) {
     		document.getElementById('screen').innerHTML=simulatorArrayLists[firstList][secondList][thirdList][fourtList];
     		if (firstList==3) {
     			document.getElementById('screen').innerHTML=simulatorArrayLists[firstList][secondList][thirdList][1];
     		}
     		if (secondList==5) {
     			document.getElementById('screen').innerHTML=simulatorArrayLists[firstList][secondList][thirdList][fourtList][0];
     		}
     		if (secondList==7) {
     			receiverNumber=prompt('Enter phone number here');
     			document.getElementById('screen').innerHTML=simulatorArrayLists[firstList][secondList][thirdList][fourtList]+ " " +receiverNumber;
     		}
     		line="net8";
     		inputLocker='off';
     	}
    }
    if (line=="net9"){
     	if (seconds==2) {
     		fifthList=document.getElementById('screen').innerHTML;
     		document.getElementById('screen').innerHTML='Please wait...';
     		inputLocker='off';
     	}
     	if (seconds==0) {
     		document.getElementById('screen').innerHTML=simulatorArrayLists[firstList][secondList][thirdList][fourtList][fifthList];
     		line="net10";
     		inputLocker='off';
     	}
    }

  // code block of *123# end here
    if(seconds < 1){
      seconds = 3;
      return;
    }
    seconds--;
    setTimeout('go()',1000);
  }	
}

function next() {
	inputLocker="on"; 
	if (line=="net")  {
		document.getElementById('screen').innerHTML="";
		line="net1";
	}
  if (line=="net2") {
  	document.getElementById('screen').innerHTML="";
  	line="net3";
  }
  if (line=="net4") {
  	document.getElementById('screen').innerHTML="";
  	line="net5";
  }
  if (line=="net6") {
  	document.getElementById('screen').innerHTML="";
  	line="net7";
  }
  if (line=="net8") {
  	document.getElementById('screen').innerHTML="";
  	line="net9";
  }
}


function pickUp() {
  inputLocker="off";
  if (document.getElementById('iphone').innerHTML == '') {
    document.getElementById('iphone').innerHTML == '';
		return;
	}
	else{
  	a.pause();
  	callSec++;
  	amtSec++;
      if (callSec==60) {
      	callMin++;
      	callSec=0;
      	if (callMin==60) {
      		callHour++;
      		callMin=0;
      	}
      }
      document.getElementById('screen').innerHTML=callHour+":"+callMin+":"+callSec;
      document.getElementById('iphone').innerHTML=callHour+":"+callMin+":"+callSec;
      if(document.getElementById('screen').innerHTML==callHour+":"+callMin+":"+callSec) {
      	inputLocker='off';
        localStorage.Balance-=0.11;
        amtUsed = amtSec * 0.11;
        console.log(amtUsed);
      	if (localStorage.Balance<=0) {
      		localStorage.Balance=0;
      		alert('The duration of your last call is'+' '+amtSec+' '+'secs. and you have been charged with N'+amtUsed+' '+'for it.');
      	}
      }
      if (localStorage.Balance==0) {
      	document.getElementById('screen').innerHTML='Call Ended';
      	document.getElementById('iphone').innerHTML='Call Ended'; 
      	b.play();
      	b.oncanplaythrough=function(){
      		b.pause();
      		document.getElementById('screen').innerHTML='';
      		document.getElementById('iphone').innerHTML='';
      		return;
      	}
      }
  }
  tim=setTimeout('pickUp()',1000);
}
